import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-runtime";
import { createRenderer } from "../index.js";
import { useExtensionActions } from "../../hooks/useExtensionActions.js";
import { Button } from "../../index.js";
function MyActionsCrmComponent() {
    const actions = useExtensionActions();
    return (_jsxs(_Fragment, { children: [_jsx(Button, { testId: "reloadButton", onClick: () => actions.reloadPage(), children: "Reload Page" }), _jsx(Button, { testId: "fetchButton", onClick: () => {
                    actions.fetchCrmObjectProperties(['firstname', 'lastname']);
                }, children: "Fetch Properties" })] }));
}
function MyActionsHomeComponent() {
    const actions = useExtensionActions();
    return (_jsx(_Fragment, { children: _jsx(Button, { testId: "copyButton", onClick: () => actions.copyTextToClipboard('Hello world'), children: "Copy Text" }) }));
}
describe('mock actions', () => {
    it('should provide the ability to spy on the actions for the "crm.record.tab" extension point', () => {
        const { mocks, render, findByTestId } = createRenderer('crm.record.tab');
        const { actions } = mocks;
        render(_jsx(MyActionsCrmComponent, {}));
        findByTestId(Button, 'reloadButton').trigger('onClick');
        expect(actions.reloadPage.callCount).toBe(1);
        findByTestId(Button, 'fetchButton').trigger('onClick');
        expect(actions.fetchCrmObjectProperties.callCount).toBe(1);
    });
    it('should provide the ability to spy on the actions for the "home" extension point', () => {
        const { mocks, render, findByTestId } = createRenderer('home');
        const { actions } = mocks;
        render(_jsx(MyActionsHomeComponent, {}));
        findByTestId(Button, 'copyButton').trigger('onClick');
        expect(actions.copyTextToClipboard.callCount).toBe(1);
    });
});
